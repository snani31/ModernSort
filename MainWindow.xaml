<Window x:Class="ModernSort.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ModernSort"
        xmlns:view="clr-namespace:ModernSort.View.Windows"
        xmlns:vms="clr-namespace:ModernSort.ViewModel.Windows"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        mc:Ignorable="d"
        WindowStyle="none"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterScreen"
        AllowsTransparency="True"
        Background="Transparent"
        Title="MainWindow" 
        Height="450" 
        Width="800"
        >
    <Border
     Background= "#f7f9fe"
     CornerRadius="20"
     ClipToBounds="True"
         >
        <Grid ClipToBounds="True">
            <Grid.RowDefinitions>
                <RowDefinition 
                 Height="50"
                 />
                <RowDefinition/>
            </Grid.RowDefinitions>
            <Border
             Grid.Column="0"
             Grid.ColumnSpan="1"
             CornerRadius="20,20,0,0"
             Background="#512f95"
             BorderThickness="0"
             >
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="50"/>
                        <ColumnDefinition Width="50"/>
                    </Grid.ColumnDefinitions>

                    <Button Grid.Column="2"
                         Command="{Binding CloseApplication}"
                         ToolTip="Закрыть">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border BorderThickness="0" Margin="0" Name="brd" Background="Transparent" CornerRadius="10 20 0 10">
                                    <Image Margin="5" Source="AppResources\PowerOffButtonIcon.png"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="brd" Property="Background" Value="#a1261d"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button Grid.Column="1"
                         Command="{Binding CollapselicationCommand}"
                         ToolTip="Свернуть">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border BorderThickness="0" Margin="0" Name="brd" Background="Transparent" CornerRadius="10 20 0 10">
                                    <Image Margin="5" Source="AppResources\CollapseWindpwIcon.png"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="brd" Property="Background" Value="#492988"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                </Grid>
            </Border>

            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition
                        Width="2*"
                        />
                    <ColumnDefinition
                        Width="*"/>
                </Grid.ColumnDefinitions>
                <Border
                    Grid.Column="0"
                    Background= "#ccd5f0"
                    CornerRadius="0,20,20,0"
                    ClipToBounds="True">
                    <ListView
                    ScrollViewer.CanContentScroll="False"
                    HorizontalContentAlignment="Left"
                    BorderThickness="0"
                    ItemsSource="{Binding RankingCategoriesItems}"
                    Background="Transparent"
                    Padding="0 10 20 10"
                      >
                        <ListView.ItemContainerStyle>
                            <Style TargetType="{x:Type ListViewItem}" BasedOn="{StaticResource RankingListItemStyle}">
                                <Setter Property="ToolTip" Value="{Binding Descryption}"/>
                                <Setter Property="VerticalContentAlignment" Value="Stretch"/>
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                            </Style>
                        </ListView.ItemContainerStyle>
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <Grid
                                    Background="Transparent"
                                    >
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="150"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="150"/>
                                        <ColumnDefinition Width="3*"/>
                                    </Grid.ColumnDefinitions>

                                    <Border
                                        x:Name="ItemBrd"
                                        BorderBrush="#f7f9fe"
                                        BorderThickness="5"
                                        ClipToBounds="True"
                                        Background="#512f95"
                                        >
                                        <Image
                                            Stretch="Fill"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            Grid.Column="0" 
                                            Grid.Row="0"
                                            Source="{Binding RankingIconPath,
                                            Converter={StaticResource ToBitmapConverter}}"/>
                                    </Border>
                                    <TextBlock 
                                        Margin="25"
                                        FontSize="20"
                                        TextWrapping="Wrap"
                                        HorizontalAlignment="Left"
                                        VerticalAlignment="Center"
                                        Grid.Column="1"
                                        Grid.Row="0"
                                        MaxWidth="450"
                                        Text="{Binding Tytle}"/>
                                    <Button
                                        Grid.Column="0"
                                        Command="{Binding DataContext.OpenEditRankingWindow, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}"
                                        CommandParameter="{Binding}"
                                        ToolTip="Edit Category"
                                        Background="Transparent"
                                        >
                                        <Button.Template>
                                            <ControlTemplate TargetType="Button">
                                                <Border 
                                                    BorderBrush="Black"
                                                    Name="brd" 
                                                    Background="Transparent"
                                                    VerticalAlignment="Center"
                                                    HorizontalAlignment="Center">
                                                    <Image
                                                        x:Name="img"
                                                        Margin="20"
                                                        />
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="img" Property="Source" Value="AppResources\Pictures\pencilBlack64px.png"/>
                                                        <Setter TargetName="brd" Property="BorderThickness" Value="{Binding ElementName=ItemBrd, Path=BorderThickness}"/>
                                                        <Setter TargetName="brd" Property="Background">
                                                            <Setter.Value>
                                                                <SolidColorBrush
                                                                    Color="Black"
                                                                    Opacity="0.5"
                                                                    />
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Trigger>

                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>

                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="MouseDown">
                                            <i:InvokeCommandAction 
                                                Command="{Binding DataContext.OpenSelectedRankingWindow, 
                                                RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}"
                                                CommandParameter="{Binding}" />
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>

                                </Grid>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                        <ListView.Resources>
                            <Style TargetType="ScrollBar" BasedOn="{StaticResource WhiteScrollBarStyle}"/>
                        </ListView.Resources>
                    </ListView>
                </Border>

                <Grid Grid.Column="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Button
                        Background="#512f95"
                        Command="{Binding OpenNewRankingWindow}"
                        Content="Make new Ranking"
                        Style="{StaticResource Button}"
                        Margin="20"
                        Grid.Row="0"
                            />
                    <Button 
                        Background="#512f95"
                        Content="Settings"
                        Style="{StaticResource Button}"
                        Margin="20"
                        Grid.Row="1"
                            />
                    <Button 
                        Background="#512f95"
                        Command="{Binding CloseApplication}"
                        Content="Exit"
                        Style="{StaticResource Button}"
                        Margin="20"
                        Grid.Row="2"
                            />
                </Grid>
            </Grid>



        </Grid>

    </Border>
</Window>
